(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(2031)}])},2031:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(5893),r=a(7294);let n=[{id:"home",label:"Home",link:"/dashboard#home"},{id:"taktplan",label:"Takt Plan",link:"/dashboard#taktplan"},{id:"handover",label:"Handover",link:"/dashboard#handover"},{id:"scurve",label:"S-Curve",link:"/dashboard#scurve"},{id:"portfolio",label:"Portfolio",link:"/dashboard#portfolio"}];function l(){let[e,s]=(0,r.useState)("home");return(0,r.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&s(e.target.id)})},{threshold:.3});return n.forEach(s=>{let a=document.getElementById(s.id);a&&e.observe(a)}),()=>{n.forEach(s=>{let a=document.getElementById(s.id);a&&e.unobserve(a)})}},[]),(0,t.jsxs)("aside",{className:"w-64 bg-white shadow flex flex-col fixed h-full",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("img",{src:"/logo.png",alt:"TaktR Logo",className:"w-12 h-auto mx-auto"})}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:n.map(s=>{let{id:a,label:r,link:n}=s;return(0,t.jsx)("a",{href:n,className:"block p-2 rounded font-semibold transition ".concat(e===a?"bg-brandLight text-brand":"text-brand hover:bg-brandLight"),children:r},a)})})]})}var o=a(5608);function d(e){let{taskIndex:s,onClose:a}=e,{tasks:r}=(0,o.P)(),n=r[s];return(0,t.jsxs)("div",{className:"fixed right-0 top-0 w-80 h-full bg-white shadow-lg p-4",children:[(0,t.jsx)("button",{onClick:a,className:"mb-4 text-red-500",children:"Close"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:n.label}),(0,t.jsxs)("p",{children:["Trade: ",n.trade]}),(0,t.jsxs)("p",{children:["Duration: ",n.duration," days"]}),(0,t.jsxs)("p",{children:["Notes: ",n.notes||"None"]})]})}function i(){let{tasks:e,setSCurve:s}=(0,o.P)(),[a,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{e.length>0&&s(function(e){let s=[],a=e.length,t=0;return e.forEach((e,r)=>{let n=++t/a*100;s.push({day:e.finishDay||r+1,progress:n})}),s}(e))},[e,s]),(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow relative",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC5 Takt Plan"}),0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No tasks scheduled."}):e.map((e,s)=>(0,t.jsxs)("div",{className:"border p-2 rounded cursor-pointer hover:bg-gray-50",onClick:()=>n(s),children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:e.label}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.trade," — Day ",e.startDay," to Day ",e.finishDay]})]},s)),null!==a&&(0,t.jsx)(d,{taskIndex:a,onClose:()=>n(null)})]})}var c=a(3148),h=a(6495);function u(){let{scurve:e}=(0,o.P)(),s=e.map(e=>"Day ".concat(e.day)),a=e.map(e=>e.progress||0);return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC8 S-Curve"}),(0,t.jsx)(h.x1,{data:{labels:s,datasets:[{label:"S-Curve Progress",data:a,borderColor:"#2563eb",tension:.3}]},options:{responsive:!0,plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,text:"S-Curve Forecast"}},scales:{y:{beginAtZero:!0,max:100}}}})]})}function m(){let{handovers:e}=(0,o.P)();return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDD04 Handovers"}),0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No handovers scheduled."}):e.map((e,s)=>(0,t.jsxs)("div",{className:"border p-2 mb-2 rounded",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold",children:[e.fromTrade," ➡ ",e.toTrade]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Zone: ",e.zone," — Day ",e.day]})]},s))]})}function x(){let{tasks:e,metrics:s}=(0,o.P)(),a=e.length,r=a>0?e.reduce((e,s)=>e+(s.duration||0),0)/a:0;return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Metrics"}),(0,t.jsxs)("p",{children:["Total Tasks: ",s.totalTasks]}),(0,t.jsxs)("p",{children:["Completed Tasks: ",s.completedTasks]}),(0,t.jsxs)("p",{children:["Completion Rate: ",s.completionRate,"%"]}),(0,t.jsxs)("p",{children:["Average Task Duration: ",r.toFixed(1)," days"]})]})}c.kL.register(c.jn,c.uw,c.f$,c.od,c.Dx,c.u,c.De);var p=a(7460),b=a.n(p),f=a(2002);function g(){let{setTasks:e,setMetrics:s,setSCurve:a,setHandovers:n}=(0,o.P)(),l=(0,r.useCallback)(t=>{t.forEach(t=>{b().parse(t,{header:!0,skipEmptyLines:!0,complete:t=>{let r=t.data.map((e,s)=>({label:e.Task||"Task ".concat(s+1),trade:e.Trade||"Unknown Trade",startDay:parseInt(e.StartDay||0),finishDay:parseInt(e.FinishDay||0),duration:parseInt(e.Duration||0),completed:"Yes"===e.Completed,notes:e.Notes||""}));e(r);let l=r.length,o=r.filter(e=>e.completed).length,d=l>0?r.reduce((e,s)=>e+(s.duration||0),0)/l:0;s({totalTasks:l,completedTasks:o,completionRate:l>0?o/l*100:0,avgDuration:d}),a(r.map((e,s)=>({day:e.startDay,progress:s/l*100,cumulative:(s+1)/l*100}))),n(r.map((e,s)=>{var a;return{fromTrade:e.trade,toTrade:(null===(a=r[s+1])||void 0===a?void 0:a.trade)||"",zone:"Zone ".concat(s+1),day:e.finishDay||e.startDay||s}}))}})})},[e,s,a,n]),{getRootProps:d,getInputProps:i,isDragActive:c}=(0,f.uI)({onDrop:l});return(0,t.jsxs)("div",{...d(),className:"border-2 border-dashed rounded-lg p-6 cursor-pointer text-center transition ".concat(c?"bg-blue-100 border-blue-400":"bg-gray-50 border-gray-300"),children:[(0,t.jsx)("input",{...i()}),c?(0,t.jsx)("p",{className:"text-blue-600 font-semibold",children:"Drop the CSV file here..."}):(0,t.jsx)("p",{className:"text-gray-600",children:"Drag & drop a project schedule CSV, or click to upload"})]})}function j(){return(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,t.jsx)(l,{}),(0,t.jsxs)("main",{className:"flex-1 p-6 space-y-6",children:[(0,t.jsx)(g,{}),(0,t.jsx)(x,{}),(0,t.jsx)(i,{}),(0,t.jsx)(u,{}),(0,t.jsx)(m,{})]})]})}}},function(e){e.O(0,[196,394,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);