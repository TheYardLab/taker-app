(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(3399)}])},3399:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(5893),l=a(7294);let r=[{id:"home",label:"Home",link:"/dashboard#home"},{id:"taktplan",label:"Takt Plan",link:"/dashboard#taktplan"},{id:"handover",label:"Handover",link:"/dashboard#handover"},{id:"scurve",label:"S-Curve",link:"/dashboard#scurve"},{id:"portfolio",label:"Portfolio",link:"/dashboard#portfolio"}];function n(){let[e,s]=(0,l.useState)("home");return(0,l.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&s(e.target.id)})},{threshold:.3});return r.forEach(s=>{let a=document.getElementById(s.id);a&&e.observe(a)}),()=>{r.forEach(s=>{let a=document.getElementById(s.id);a&&e.unobserve(a)})}},[]),(0,t.jsxs)("aside",{className:"w-64 bg-white shadow flex flex-col fixed h-full",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("img",{src:"/logo.png",alt:"TaktR Logo",className:"w-12 h-auto mx-auto"})}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:r.map(s=>{let{id:a,label:l,link:r}=s;return(0,t.jsx)("a",{href:r,className:"block p-2 rounded font-semibold transition ".concat(e===a?"bg-brandLight text-brand":"text-brand hover:bg-brandLight"),children:l},a)})})]})}var o=a(5608);function d(e){let s=[],a=0;return e.forEach(e=>{let t=e.progress||0;a+=t,s.push({day:e.startDay,progress:t,cumulative:a})}),s}function i(e){let{taskIndex:s,onClose:a}=e,{tasks:l}=(0,o.P)(),r=l[s];return r?(0,t.jsxs)("div",{className:"absolute top-0 right-0 w-64 bg-gray-100 shadow-lg h-full p-4",children:[(0,t.jsx)("button",{className:"text-red-500 mb-4",onClick:a,children:"Close"}),(0,t.jsx)("h3",{className:"font-semibold",children:r.label}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Trade: ",r.trade]}),(0,t.jsxs)("p",{className:"text-sm",children:["Days: ",r.startDay," - ",r.finishDay]}),(0,t.jsxs)("p",{className:"text-sm",children:["Notes: ",r.notes||"No notes available."]})]}):null}function c(){let{tasks:e,setTasks:s,setSCurve:a}=(0,o.P)(),[r,n]=(0,l.useState)(null);(0,l.useEffect)(()=>{e&&e.length>0&&a(d(e))},[e,a]);let c=e=>n(e);return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow relative",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC5 Takt Plan"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No tasks scheduled yet."}):e.map((e,s)=>(0,t.jsxs)("div",{className:"border p-2 rounded cursor-pointer hover:bg-gray-50",onClick:()=>c(s),children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:e.label}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.trade," — Day ",e.startDay," to Day ",e.finishDay]})]},s))}),null!==r&&(0,t.jsx)(i,{taskIndex:r,onClose:()=>n(null)})]})}var h=a(3148),u=a(6495);function m(){let{scurve:e}=(0,o.P)(),s=e.map(e=>"Day ".concat(e.day)),a=e.map(e=>e.progress||0);return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC8 S-Curve"}),(0,t.jsx)(u.x1,{data:{labels:s,datasets:[{label:"S-Curve Progress",data:a,fill:!1,borderColor:"#2563eb",tension:.3}]},options:{responsive:!0,plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,text:"S-Curve Forecast"}},scales:{y:{beginAtZero:!0,max:100,ticks:{stepSize:10}}}}})]})}function x(){let{handovers:e}=(0,o.P)();return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDD04 Handovers"}),0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No handovers scheduled yet."}):e.map((e,s)=>(0,t.jsx)("div",{className:"border p-2 mb-2 rounded",children:(0,t.jsxs)("p",{children:["From ",(0,t.jsx)("strong",{children:e.fromTrade})," to ",(0,t.jsx)("strong",{children:e.toTrade})," in zone"," ",(0,t.jsx)("strong",{children:e.zone})]})},s))]})}function b(){let{tasks:e}=(0,o.P)(),{totalTasks:s,avgDuration:a,tasksByTrade:r}=(0,l.useMemo)(()=>{let s=e.length,a=s>0?e.reduce((e,s)=>e+(s.duration||0),0)/s:0,t={};return e.forEach(e=>{t[e.trade]=(t[e.trade]||0)+1}),{totalTasks:s,avgDuration:a.toFixed(1),tasksByTrade:t}},[e]);return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Metrics"}),(0,t.jsxs)("p",{children:["Total Tasks: ",s]}),(0,t.jsxs)("p",{children:["Average Duration: ",a," days"]}),(0,t.jsx)("h3",{className:"font-semibold mt-4",children:"Tasks by Trade:"}),(0,t.jsx)("ul",{className:"list-disc ml-6",children:Object.entries(r).map(e=>{let[s,a]=e;return(0,t.jsxs)("li",{children:[s,": ",a]},s)})})]})}h.kL.register(h.jn,h.uw,h.f$,h.od,h.Dx,h.u,h.De);var g=a(7460),p=a.n(g);function f(){let{setTasks:e,setHandovers:s,setSCurve:a,setMetrics:l}=(0,o.P)();return(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDCE4 Upload Schedule"}),(0,t.jsx)("input",{type:"file",accept:".csv",onChange:t=>{var r;let n=null===(r=t.target.files)||void 0===r?void 0:r[0];n&&p().parse(n,{header:!0,complete:t=>{let r=t.data.map(e=>{var s;return{label:e.Task||"Unnamed Task",trade:e.Trade||"Unknown",startDay:parseInt(e.StartDay)||0,finishDay:parseInt(e.FinishDay)||0,duration:parseInt(e.Duration)||0,notes:e.Notes||"",completed:(null===(s=e.Completed)||void 0===s?void 0:s.toLowerCase())==="yes"}});e(r);let n=function(e){let s=[];return e.forEach(a=>{e.forEach(e=>{a.trade!==e.trade&&a.finishDay===e.startDay&&s.push({fromTrade:a.trade,toTrade:e.trade,zone:a.label,day:a.finishDay})})}),s}(r);s(n);let o=d(r);a(o);let i=function(e){let s=e.length,a=e.filter(e=>e.completed).length,t=s>0?e.reduce((e,s)=>e+(s.finishDay-s.startDay),0)/s:0;return{totalTasks:s,completedTasks:a,completionRate:s>0?a/s*100:0,avgDuration:t}}(r);l(i),console.log("✅ Tasks loaded:",r),console.log("✅ Handovers generated:",n),console.log("✅ SCurve generated:",o),console.log("✅ Metrics generated:",i)}})},className:"border p-2 rounded w-full"})]})}function j(){return(0,t.jsxs)("div",{className:"min-h-screen flex",style:{backgroundColor:"var(--brand-bg)"},children:[(0,t.jsx)(n,{}),(0,t.jsxs)("main",{className:"flex-1 ml-64 p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("section",{className:"bg-white p-6 rounded shadow col-span-2",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-brand mb-4",children:"\uD83D\uDCE4 Upload Schedule"}),(0,t.jsx)(f,{})]}),(0,t.jsx)("section",{className:"bg-white p-6 rounded shadow",children:(0,t.jsx)(c,{})}),(0,t.jsx)("section",{className:"bg-white p-6 rounded shadow",children:(0,t.jsx)(m,{})}),(0,t.jsx)("section",{className:"bg-white p-6 rounded shadow",children:(0,t.jsx)(x,{})}),(0,t.jsx)("section",{className:"bg-white p-6 rounded shadow col-span-2",children:(0,t.jsx)(b,{})})]})]})}}},function(e){e.O(0,[196,697,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);